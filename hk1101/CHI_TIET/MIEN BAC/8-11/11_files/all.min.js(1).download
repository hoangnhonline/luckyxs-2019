/*! frontend */
function setCookie(e,t,i){var n=new Date;n.setTime(n.getTime()+24*i*60*60*1e3);var r="expires="+n.toUTCString();document.cookie=e+"="+t+"; "+r}var permArr=[],usedChars=[],Common={is_processing_an_ajax:!1,makeFocus:function(e){$("#"+e).addClass("highlight")},addComma:function(e){for(var t=(e+"").split("."),i=t[0],n=i.length,r="",o=n-1;o>=0;)r=i.charAt(o)+r,(n-o)%3===0&&o>0&&(r=","+r),--o;return t.length>1&&(r+="."+t[1]),r},permute:function(e){var t,i,n=e.split("");for(t=0;t<n.length;t++)i=n.splice(t,1),usedChars.push(i),0==n.length&&(permArr[permArr.length]=usedChars.join("")),Common.permute(n.join("")),n.splice(t,0,i),usedChars.pop()},pullTwo:function(e,t){if(e>t){var n=e;e=t,t=n}var r=[];if(e[0]==t[0])for(i=e[1];i<=t[1];i++)r.push(e[0]+i);else if(e[1]==t[1])for(i=e[0];i<=t[0];i++)r.push(i+e[1]);else for(i=e;i<=t;i++)r.push(i);return r},pullThree:function(e,t){if(e>t){var n=e;e=t,t=n}var r=[];if(e[0]!=t[0]){if(e[1]!=t[1]||e[2]!=t[2])return!1;for(i=e[0];i<=t[0];i++)r.push(i+e[1]+e[2])}else if(e[1]!=t[1]){if(e[0]!=t[0]||e[2]!=t[2])return!1;for(i=e[1];i<=t[1];i++)r.push(e[0]+i+e[2])}else{if(e[2]==t[2])return!1;if(e[0]!=t[0]||e[1]!=t[1])return!1;for(i=e[2];i<=t[2];i++)r.push(e[0]+e[1]+i)}return r},pullFour:function(e,t){if(e>t){var n=e;e=t,t=n}var r=[];if(e[0]!=t[0]){if(e[1]!=t[1]||e[2]!=t[2]||e[3]!=t[3])return!1;for(i=e[0];i<=t[0];i++)r.push(i+e[1]+e[2]+e[3])}else if(e[1]!=t[1]){if(e[0]!=t[0]||e[2]!=t[2]||e[3]!=t[3])return!1;for(i=e[1];i<=t[1];i++)r.push(e[0]+i+e[2]+e[3])}else if(e[2]!=t[2]){if(e[0]!=t[0]||e[1]!=t[1]||e[3]!=t[3])return!1;for(i=e[2];i<=t[2];i++)r.push(e[0]+e[1]+i+e[3])}else{if(e[3]==t[3])return!1;if(e[0]!=t[0]||e[1]!=t[1]||e[2]!=t[2])return!1;for(i=e[3];i<=t[3];i++)r.push(e[0]+e[1]+e[2]+i)}return r},getInputSelection:function(e){var t,i,n,r,o,s=0,u=0;return"number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd?(s=e.selectionStart,u=e.selectionEnd):(i=document.selection.createRange(),i&&i.parentElement()==e&&(r=e.value.length,t=e.value.replace(/\r\n/g,"\n"),n=e.createTextRange(),n.moveToBookmark(i.getBookmark()),o=e.createTextRange(),o.collapse(!1),n.compareEndPoints("StartToEnd",o)>-1?s=u=r:(s=-n.moveStart("character",-r),s+=t.slice(0,s).split("\n").length-1,n.compareEndPoints("EndToEnd",o)>-1?u=r:(u=-n.moveEnd("character",-r),u+=t.slice(0,u).split("\n").length-1)))),{start:s,end:u}},increase:function(e){var t=$("."+e).text();t=parseInt(t)||0,$("."+e).text(++t).show()},countdown:function(){setInterval(function(){$(".count-down").each(function(){var e=$(this).data("remain");e-=1,$(this).data("remain",e),0>=e&&($(this).parent().find(".btn_del_detail").fadeOut().remove(),$(this).fadeOut().remove());var t=Math.floor(e/60),i=("0"+e%60).slice(-2);$(this).text(t+":"+i)})},1e3)}},KeyCode={isEnter:function(e){return 13==e},isTab:function(e){return 9==e},isNumber:function(e){return e>=48&&57>=e},isSpecial:function(e){return 1==e||1==e||75==e},isSpace:function(e){return 32==e},isLetterK:function(e){return 107==e||75==e},isLetterE:function(e){return 69==e}};$(function(){$(".popup-hint").popover({html:!0,trigger:"hover"}),$(".tip").tooltip({placement:"right"}),$(".tipb").tooltip({placement:"bottom"}),$(".carousel").carousel({interval:1e4}),$(".today-credit").click(function(){$(this).find(".content").toggle(),$(this).find(".button").toggle(),"inline"==$(this).find(".button").css("display")?setCookie("close",1,365):setCookie("close",0,365)})});
/*! bet */
function changeVirtualPriceKeyboardSetting(){is_turn_on_virtual_price_keyboard?(is_turn_on_virtual_price_keyboard=0,setCookie("is_turn_on_virtual_price_keyboard",0,365),$(".d2").removeClass("wrapper-virtual-price-keyboard"),$(".d3").removeClass("wrapper-virtual-price-keyboard"),$(".d4").removeClass("wrapper-virtual-price-keyboard")):(is_turn_on_virtual_price_keyboard=1,setCookie("is_turn_on_virtual_price_keyboard",1,365),$(".d2").addClass("wrapper-virtual-price-keyboard"),$(".d3").addClass("wrapper-virtual-price-keyboard"),$(".d4").addClass("wrapper-virtual-price-keyboard"))}function delTT(t){$("tr#"+t+" .txt_digital_sub").val(""),$("tr#"+t+" .txt_digital").val("")}function randomTT(t,a){for(var n=0,e=1;e<=100&&(void 0===(i=$("tr#"+e+" .txt_digital_sub:eq(0)").val())?(BetHtml.addBetEmpty(),n+=1):""==i&&(n+=1),!(n>=t));e++);for(e=1;e<=100;e++){var i=$("tr#"+e+" .txt_digital_sub:eq(0)").val();if(""==i){var r=Math.floor(10*Math.random())+""+Math.floor(10*Math.random()),d=Math.floor(10*Math.random())+""+Math.floor(10*Math.random()),l=Math.floor(10*Math.random())+""+Math.floor(10*Math.random()),o=Math.floor(10*Math.random())+""+Math.floor(10*Math.random()),s=Math.floor(10*Math.random())+""+Math.floor(10*Math.random()),c=Math.floor(10*Math.random())+""+Math.floor(10*Math.random());$("tr#"+e+" .txt_digital_sub:eq(0)").val(r),$("tr#"+e+" .txt_digital_sub:eq(1)").val(d),$("tr#"+e+" .txt_digital_sub:eq(2)").val(l),$("tr#"+e+" .txt_digital_sub:eq(3)").val(o),$("tr#"+e+" .txt_digital_sub:eq(4)").val(s),12==a&&$("tr#"+e+" .txt_digital_sub:eq(5)").val(c),$("tr#"+e).addClass("highlight"),12==a?$("tr#"+e).find(".txt_digital").val(r+""+d+l+o+s+c):$("tr#"+e).find(".txt_digital").val(r+""+d+l+o+s),BetHtml.validDigitalType($("tr#"+e).find(".txt_digital"),null),Calculate.run($("tr#"+e))}}}function random4D(t){for(var a=0,n=1;n<=100&&(void 0===(e=$("tr#"+n+" .txt_digital_sub:eq(0)").val())?(BetHtml.addBetEmpty(),a+=1):""==e&&(a+=1),!(a>=t));n++);for(n=1;n<=100;n++){var e=$("tr#"+n+" .txt_digital_sub:eq(0)").val();if(""==e){var i=Math.floor(10*Math.random()),r=Math.floor(10*Math.random()),d=Math.floor(10*Math.random()),l=Math.floor(10*Math.random());$("tr#"+n+" .txt_digital_sub:eq(0)").val(i),$("tr#"+n+" .txt_digital_sub:eq(1)").val(r),$("tr#"+n+" .txt_digital_sub:eq(2)").val(d),$("tr#"+n+" .txt_digital_sub:eq(3)").val(l),$("tr#"+n).addClass("highlight"),$("tr#"+n).find(".txt_digital").val(i+""+r+d+l),$("tr#"+n).find(".d4 ").removeAttr("disabled"),BetHtml.validDigitalType($("tr#"+n).find(".txt_digital"),null),Calculate.run($("tr#"+n))}}}var BetHtml={row_empty:"",current_row:0,row_result:"",is_adding:!1,is_show_btr_la:!1,addBetEmpty:function(){tmp=BetHtml.row_empty.replace(/__#__/g,BetHtml.current_row),$("#tbody_bet").append($(tmp).show("slow")),$("#tbody_bet tr#"+(BetHtml.current_row-2)+" td.channel input").each(function(){var t=this.checked,a=$(this).attr("class");$("#tbody_bet tr#"+(BetHtml.current_row-1)+" td.channel input").each(function(){$(this).attr("class")==a&&(this.checked=t)})}),$(".d3 input[type=checkbox]").tooltip({placement:"right"}),$(".d4 input[type=checkbox]").tooltip({placement:"right"}),BetHtml.current_row++},updateTotal:function(){var t=0,a=0,n=0;$(".invoice-detail .gross").each(function(){var n=$(this).html();""!=n&&(n=1*n.replace(new RegExp(",","g"),""),$(this).hasClass("2d")?t+=n:a+=n)}),$(".invoice-detail tr .net").each(function(){var t=$(this).html();""!=t&&(t=1*t.replace(new RegExp(",","g"),""),n+=parseFloat(t))}),$(".total_2d_gross").html(Common.addComma(t)),$(".total_3_4d_gross").html(Common.addComma(a)),$(".total_gross").html(Common.addComma(t+a)),$(".total_net").html(Common.addComma(n.toFixed(1)));var e=$(".rest_today").text();1*e.replace(new RegExp(",","g"),"")<t+a&&alert("Tài khoản cược không đủ, bạn còn "+e)},_checkTurnOnDX:function(t){0!=$(t).find(".channel input").length&&2!=$(t).find(".channel input:checked").length&&(t.find(".d2 input.dx").attr("disabled","disabled"),t.find(".d2 input.dx").parent().removeClass("wrapper-virtual-price-keyboard"))},turnOn:function(t,a){t.find(".d2 input").removeClass("forbid"),t.find(".d2 input").attr("disabled","disabled"),t.find(".d3 input").attr("disabled","disabled"),t.find(".d4 input").attr("disabled","disabled"),t.find("."+a+" input").removeAttr("disabled"),is_turn_on_virtual_price_keyboard&&t.find("."+a).addClass("wrapper-virtual-price-keyboard");var n=t.find(".txt_digital").val();"d2"==a?n.match(/^\d{2}( \d{0,2}){1,8}$/)?this._checkTurnOnDX(t):this._turnOffDa(t):"d3"==a?(n.match(/^\d{3}( \d{3}){0,5}$/)&&(t.find(".d2 input").removeAttr("disabled"),is_turn_on_virtual_price_keyboard&&t.find(".d2").addClass("wrapper-virtual-price-keyboard"),this._turnOffDa(t)),n.match(/^\d{3}[k]\d{3}$/)&&t.find(".d3 input[type=checkbox]").attr("disabled","disabled")):"d4"==a&&(n.match(/^\d{4}( \d{4}){0,4}$/)&&(t.find(".d3 input").removeAttr("disabled"),t.find(".d2 input").removeAttr("disabled"),is_turn_on_virtual_price_keyboard&&(t.find(".d3").addClass("wrapper-virtual-price-keyboard"),t.find(".d2").addClass("wrapper-virtual-price-keyboard")),this._turnOffDa(t)),n.match(/^\d{4}[k]\d{4}$/)&&t.find(".d4 input[type=checkbox]").attr("disabled","disabled")),hookSpecial(t)},_turnOffDa:function(t){t.find(".d2 input.da").attr("disabled","disabled"),t.find(".d2 input.dx").attr("disabled","disabled"),t.find(".d2 input.da").parent().removeClass("wrapper-virtual-price-keyboard"),t.find(".d2 input.dx").parent().removeClass("wrapper-virtual-price-keyboard")},validDigitalTyping:function(t,a){var n=a.which||a.keyCode||0,e=$(t).parents("tr"),i=$(t).val();if(""==i)return BetHtml.turnOn(e,"d0"),void(KeyCode.isNumber(n)||a.preventDefault());if(KeyCode.isSpace(n)&&" "==i.slice(-1))a.preventDefault();else{var r=i,d=Common.getInputSelection(t);if(d.start==d.end&&(r=[i.slice(0,d.start),String.fromCharCode(n),i.slice(d.start)].join("")),"number"!=typeof mega_length)if(r.match(/^\d{4}[k]\d{0,4}$/))BetHtml.turnOn(e,"d4");else if(r.match(/^\d{4}( \d{0,4}){0,4}$/))BetHtml.turnOn(e,"d4");else if(r.match(/^\d{3}[k]\d{0,3}$/))BetHtml.turnOn(e,"d3");else{if(r.match(/^\d{3}( \d{0,3}){0,5}$/))return BetHtml.turnOn(e,"d3"),void(r.match(/^\d{3}( \d{3}){1,4}$/)&&($(t).val(r+" "),a.preventDefault()));if(!r.match(/^\d{2}[k]\d{0,2}$/))return r.match(/^\d{2}( \d{0,2}){0,8}$/)?(BetHtml.turnOn(e,"d2"),void(r.match(/^\d{2}( \d{2}){1,7}$/)&&($(t).val(r+" "),a.preventDefault()))):(BetHtml.turnOn(e,"d"),a.preventDefault(),!1);BetHtml.turnOn(e,"d2")}else 12==mega_length&&r.match(/^\d{12}$/)?BetHtml.turnOn(e,"d4"):10==mega_length&&r.match(/^\d{10}$/)?BetHtml.turnOn(e,"d4"):4==mega_length&&r.match(/^\d{4}$/)&&BetHtml.turnOn(e,"d4")}},validDigitalType:function(t,a){var n=!1,e=$(t).parents("tr"),i=e.find(".txt_digital").val();if(i){if("number"==typeof mega_length)return 12==mega_length&&i.match(/^\d{12}$/)?(n=!0,BetHtml.turnOn(e,"d4")):10==mega_length&&i.match(/^\d{10}$/)?(n=!0,BetHtml.turnOn(e,"d4")):4==mega_length&&i.match(/^\d{4}$/)&&(n=!0,BetHtml.turnOn(e,"d4")),void(n?$(t).css({color:"#000"}):($(t).css({color:"#f00"}),BetHtml.turnOn(e,"off")));i.match(/^\d{4}[k]\d{4}$/)?(n=!0,BetHtml.turnOn(e,"d4")):i.match(/^\d{4}( \d{4}){0,4}$/)?(n=!0,BetHtml.turnOn(e,"d4")):i.match(/^\d{3}[k]\d{3}$/)?(n=!0,BetHtml.turnOn(e,"d3")):i.match(/^\d{3}( \d{3}){0,5}$/)?(n=!0,BetHtml.turnOn(e,"d3")):i.match(/^\d{2}[k]\d{2}$/)?(n=!0,BetHtml.turnOn(e,"d2")):i.match(/^\d{2}( \d{2}){0,8}$/)&&(n=!0,BetHtml.turnOn(e,"d2")),n?$(t).css({color:"#000"}):($(t).css({color:"#f00"}),BetHtml.turnOn(e,"off"))}},del:function(t){var a=$(t).parents("tr"),n=a.find("td:nth-child(2)").text()+" - ";n+=a.find("td:nth-child(3)").text()+" - ",n+=a.find("td:nth-child(4)").text()+" - ",n+=a.find("td:nth-child(5)").text()+"đ<br>";var e="= = = = = = = = = = = = = = = <br>";Common.is_processing_an_ajax||bootbox.confirm({size:"small",message:"<b>XÁC NHẬN XÓA 1 DÒNG CÁ CƯỢC!</b><br>"+e+n+e,callback:function(t){if(1==t){Common.is_processing_an_ajax=!0;var n=a.parents("table");$.post("/invoice_ajax/deleteDetail",{id:n.data("id"),detail:a.data("id"),token:a.data("token")},function(t){Common.is_processing_an_ajax=!1,0==t.error?(a.css("text-decoration","line-through"),a.addClass("blur"),a.find(".count-down").remove(),n.find(".gross_2d").html(t.data.gross_2d),n.find(".gross_34d").html(t.data.gross_34d),n.find(".net_2d").html(t.data.net_2d),n.find(".net_34d").html(t.data.net_34d),n.find(".net_234d").html(t.data.net_234d),0==t.data.total_net&&n.parent().hide("slow")):alert(t.msg)},"json")}}})},delInv:function(t){var a=$(t).parents("tr");if(""!=a.find("span.short-msg").text())n=(n=a.find("span.short-msg").text().trim()).substr(0,50);else{var n=a.find("td:nth-child(4)").text().trim();n=n.substr(0,100)}var e="= = = = = = = = = = = = = = = <br>";Common.is_processing_an_ajax||bootbox.confirm({size:"small",message:"<b>XÁC NHẬN XÓA 1 TIN CÁ CƯỢC!</b><br>"+e+n+"<br>"+e,callback:function(t){1==t&&(Common.is_processing_an_ajax=!0,$.post("/invoice_ajax/deleteInv",{id:a.data("id"),token:a.data("token")},function(t){Common.is_processing_an_ajax=!1,0==t.error?(a.css("text-decoration","line-through"),a.find(".btn_del_invoice").remove(),$.get("/invoice_ajax/load_rows/"+Invoice.load_rows_by_region,function(t){$(".load_rows_by_region").html(t),$(".tip").tooltip({placement:"right"})})):alert(t.msg)},"json"))}})},processKeyboard:function(t){var a=$(t).parents("td").find('input[type="number"]'),n=$(a).val();n=n||0;var e=$(t).data("val");if(void 0!==e)if("del"==e)$(a).val(""),Calculate.run($(t).parents("tr"));else{var i=parseInt(n)+parseInt(e),r=parseInt($(a).attr("max"));i>r?($(a).val(r),alert("Cược tối đa /1con của bạn là "+Common.addComma(r))):$(a).val(i),Calculate.run($(t).parents("tr"))}}};$(function(){$(".invoice-detail").on("keypress","input.txt_digital",function(t){BetHtml.validDigitalTyping(this,t)}),$(".invoice-detail").on("focusout","input.txt_digital",function(t){$(this).val($.trim($(this).val())),BetHtml.validDigitalType(this,t),Calculate.run($(this).parents("tr"))}),$(".invoice-detail").on("keydown","input[type=number]",function(t){var a=t.which||t.keyCode||0;KeyCode.isLetterE(a)?t.preventDefault():-1!==$.inArray(a,[46,8,9,27,13,110])||t.keyCode>=35&&t.keyCode<=40||$(this).val().length>=4&&t.preventDefault()}),$(".invoice-detail").on("keyup","input[type=number]",function(){Calculate.run($(this).parents("tr"))}),$(".invoice-detail").on("change","input[type=checkbox]",function(t){BetHtml.validDigitalType(this,t),Calculate.run($(this).parents("tr"))}),$(".d3 input[type=checkbox]").tooltip({placement:"right"}),$(".d4 input[type=checkbox]").tooltip({placement:"right"}),$("#tbody_bet").on("focus","tr:last-child .d234 input",function(){BetHtml.addBetEmpty()}),$(".invoice-detail").on("click","input.check_row_col",function(evt){var t=this.checked;$(".invoice-detail .channel input").each(function(){this.checked=t;}),$("#tbody_bet tr").each(function(){Calculate.run(this);BetHtml.validDigitalType(this, evt);})}),$(".invoice-detail").on("click","input.check_col",function(evt){var t=this.checked,a=$(this).data("col");$("#tbody_bet tr td.channel").each(function(){$(this).find("input").each(function(){$(this).val()==a&&(this.checked=t)})}),$("#tbody_bet tr").each(function(){Calculate.run(this);BetHtml.validDigitalType(this, evt);})}),$(".invoice-detail").on("click","input.check_row",function(){var t=this.checked;$(this).parents(".channel").find("input").each(function(){this.checked=t})}),$(".act_detail").on("click",".btn_del_detail",function(){BetHtml.del(this)}),$(".act_index").on("click",".btn_del_invoice",function(){BetHtml.delInv(this)}),$(window).keydown(function(t){if(13==t.keyCode)return t.preventDefault(),!1}),$("#frm_add_bet").submit(function(t){window.onbeforeunload=null,t.preventDefault(),Common.is_processing_an_ajax?alert("Hệ thống đang xử lý..."):""!=$(".total_gross").html()&&"0"!=$(".total_gross").html()?("/bet_ajax/agree"==$(this).attr("action")&&$("#tbody_bet tr").each(function(){var t=this,a=$(t).find(".txt_digital").val();if(a)if(a.match(/^\d{4}[k]\d{4}/)||a.match(/^\d{4}( \d{4}){0,4}$/)){if((r=parseInt($(t).find(".d4 .baolo").val())||0)+(i=parseInt($(t).find(".d4 .cuoi").val())||0)<=0)return void alert("Vui lòng nhập tiền cược 4 số ["+a+"]")}else if(a.match(/^\d{3}[k]\d{3}/)||a.match(/^\d{3}( \d{3}){0,5}$/)){var n=parseInt($(t).find(".d3 .xc").val()||0),e=parseInt($(t).find(".d3 .dau").val()||0),i=parseInt($(t).find(".d3 .cuoi").val()||0),r=parseInt($(t).find(".d3 .baolo").val()||0);if(n+e+i+r+parseInt($(t).find(".d3 .bao7lo").val()||0)<=0)return void alert("Vui lòng nhập tiền cược 3 số ["+a+"]")}}),Common.is_processing_an_ajax=!0,$("#frm_add_bet .btn-warning").button("loading"),$.ajax({url:$(this).attr("action"),type:"POST",data:$(this).serialize(),success:function(t){t=$.parseJSON(t),Common.is_processing_an_ajax=!1,$("#frm_add_bet .btn-warning").button("reset"),t.error?alert(t.msg):t.link?window.location=t.link:alert("Đặt hàng không thành công. Vui lòng thử lại")}})):alert("Vui lòng nhập đủ thông tin cá cược!")}),$("#frm_add_bet_pull").submit(function(t){window.onbeforeunload=null,t.preventDefault(),Calculate.run_pull(this)&&(Common.is_processing_an_ajax?alert("Hệ thống đang xử lý..."):(Common.is_processing_an_ajax=!0,$("#frm_add_bet_pull .btn-warning").button("loading"),$.ajax({url:$(this).attr("action"),type:"POST",data:$(this).serialize(),success:function(t){t=$.parseJSON(t),Common.is_processing_an_ajax=!1,$("#frm_add_bet_pull .btn-warning").button("reset"),t.error?alert(t.msg):t.link?window.location=t.link:alert("Đặt hàng không thành công. Vui lòng thử lại")}})))}),$("#frm_add_bet_word").submit(function(t){if(window.onbeforeunload=null,t.preventDefault(),Common.is_processing_an_ajax)alert("Hệ thống đang xử lý...");else{var a=$.trim($("#content").html());""!=(a=a.replace(/\<span.*\>\|\<\/span\>/,""))?(Common.is_processing_an_ajax=!0,$(".btn-warning").button("loading"),$.ajax({url:$(this).attr("action"),type:"POST",data:{data:a,action:$("#frm_add_bet_word input[name='action']").val(),token:$("#frm_add_bet_word input[name='token']").val()},success:function(t){t=$.parseJSON(t),Common.is_processing_an_ajax=!1,$(".btn-warning").button("reset"),t.error?alert(t.msg):t.link?window.location=t.link:alert("Đặt hàng không thành công. Vui lòng thử lại")}})):alert("Vui lòng nhập đủ thông tin cá cược!")}})});


/*! arrow */
var Arrow={max_row_jump:20,move_left_chanel:function(n,t,r){if($(n).parents("td").hasClass("channel"))for(var a=$(n).parents("td").find("input").length,e=a;e>1;e--)if($("tr#"+(t+1)).find("input[data-key="+e+"]").is(":focus")&&0!=e)return $("tr#"+(t+1)).find("input[data-key="+(e-1)+"]").focus(),!0;return!1},move_right_channel:function(n,t,r){if($(n).parents("td").hasClass("channel"))for(var a=$(n).parents("td").find("input").length,e=1;a>e;e++)if($("tr#"+(t+1)).find("input[data-key="+e+"]").is(":focus")&&e!=a)return $("tr#"+(t+1)).find("input[data-key="+(e+1)+"]").focus(),!0;return!1},move_up_channel:function(n,t,r,a){return $(n).parents("td").hasClass("channel")?($("tr#"+t).find("input[data-key="+$(a).data("key")+"]").focus(),!0):!1},move_down_channel:function(n,t,r,a){return $(n).parents("td").hasClass("channel")?($("tr#"+(t+2)).find("input[data-key="+$(a).data("key")+"]").focus(),!0):!1},move_left_number:function(n,t,r){for(var a=0;a<Arrow.max_row_jump;a++)if(0==$("tr#"+(t+1)).find("input[data-col="+(r-1-a)+"]").prop("disabled")){var e=$("tr#"+(t+1)).find("input[data-col="+(r-1-a)+"]");if($(e).parents("td").hasClass("channel")){var o=$(e).parents("td").find("input").length;$("tr#"+(t+1)).find("input[data-key="+o+"]").focus()}else $("tr#"+(t+1)).find("input[data-col="+(r-1-a)+"]").focus();break}},move_right_number:function(n,t,r){if($("tr#"+(t+1)).find("input[data-col="+r+"]").next().is(":focus")||"checkbox"!=$("tr#"+(t+1)).find("input[data-col="+r+"]").next().prop("type")){for(var a=0;a<Arrow.max_row_jump;a++)if(0==$("tr#"+(t+1)).find("input[data-col="+(r+1+a)+"]").prop("disabled")){$("tr#"+(t+1)).find("input[data-col="+(r+1+a)+"]").focus();break}}else $("tr#"+(t+1)).find("input[data-col="+r+"]").next().focus()},move_up_number:function(n,t,r){for(var a=!1,e=0;e<Arrow.max_row_jump;e++)if(0==$("tr#"+(t-e)).find("input[data-col="+r+"]").prop("disabled")){$("tr#"+(t-e)).find("input[data-col="+r+"]").focus(),a=!0;break}0==a&&($("tr#"+t).find("td.channel").length>0?$("tr#"+t).find("input[data-col=2]").focus():$("tr#"+t).find("input[data-col=1]").focus())},move_down_number:function(n,t,r){for(var a=!1,e=0;e<Arrow.max_row_jump;e++)if(0==$("tr#"+(t+2+e)).find("input[data-col="+r+"]").prop("disabled")){$("tr#"+(t+2+e)).find("input[data-col="+r+"]").focus(),a=!0;break}0==a&&($("tr#"+(t+2)).find("td.channel").length>0?$("tr#"+(t+2)).find("input[data-col=2]").focus():$("tr#"+(t+2)).find("input[data-col=1]").focus())}};$(function(){$("#tbody_bet").on("keydown","input",function(n){if(n.keyCode>=37&&n.keyCode<=40){var t=$(this).parent(),r=$(t).index(),a=$(t).closest("tr").index();37==n.keyCode?Arrow.move_left_chanel(t,a,r)||Arrow.move_left_number(t,a,r):38==n.keyCode?Arrow.move_up_channel(t,a,r,this)||Arrow.move_up_number(t,a,r):39==n.keyCode?Arrow.move_right_channel(t,a,r)||($(t).parents("td").hasClass("channel")&&(r=1),Arrow.move_right_number(t,a,r)):40==n.keyCode&&(Arrow.move_down_channel(t,a,r,this)||Arrow.move_down_number(t,a,r)),n.preventDefault()}})});
/*! invoice */
var Invoice={last_time_sms_checked:0,load_rows_by_region:0,load_detail_by_region:0,loading_notify:!1,_loadNewNotify:function(){Invoice.loading_notify||(Invoice.loading_notify=!0,$.get("/invoice_ajax/sms_notify/"+Invoice.last_time_sms_checked,function(t){if(Invoice.loading_notify=!1,!t.error){if(t.data.length<=0)return;for(i in t.data){ion.sound.play("water_droplet"),Invoice.last_time_sms_checked=t.data[0].modified;var o="#";1!=t.data[i].region&&3!=t.data[i].region||(o="/invoice/detail/"+t.data[i].id),t.data[i].is_ok?(Common.increase("badge-"+t.data[i].region),$.notify({title:t.data[i].msg,message:"<br>"+t.data[i].msg2,url:o},{type:"success"})):$.notify({title:t.data[i].msg,message:"<br>"+t.data[i].msg2,url:"#"},{type:"danger"})}t.count_north_today&&$(".badge-3").text(t.count_north_today).show(),t.count_south_today&&$(".badge-1").text(t.count_south_today).show(),$(".rest_today").text(t.rest_today).show()}},"json"))},makeNotify:function(){$.notifyDefaults({volume:.6,newest_on_top:!0,placement:{from:"bottom",align:"right"},spacing:5,delay:3e4,timer:1e3,url_target:"_self",offset:4}),setInterval(function(){Invoice._loadNewNotify()},1e4)}};
/*! calculate */
Calculate={formula:"",run_pull:function(a){var n=0;if(1==Calculate.region?$(".pull-number-2 input.channel").each(function(){this.checked&&(n+=1)}):n=1,0==n)return alert("Bạn chưa chọn ĐÀI để cược!"),$(".pull-number-2 label").addClass("highlight"),!1;var t=0;if($(".pull-number tr input").each(function(){(this.checked||"checked"==$(this).attr("checked"))&&(parseInt($(this).attr("id"))>0?t+=1:"00"==$(this).attr("id")&&(t+=1))}),0==t)return alert("Hãy chọn số cược"),$(".pull-number tr").addClass("highlight"),!1;var i=this.formula["2_price"],o=parseInt($(".pull-number-2 .dau_cuoi").val()*i.DAU_CUOI.factor)||0,e=parseInt($(".pull-number-2 .dau").val()*i.DAU.factor)||0,r=parseInt($(".pull-number-2 .cuoi").val()*i.CUOI.factor)||0,l=parseInt($(".pull-number-2 .baolo").val()*i.BAOLO.factor)||0,d=(o+e+r+l)*n*t;d*i.DAU_CUOI.commission;if(0==d)return alert("Bạn chưa nhập tiền cược!"),$(".pull-number-2 .dau_cuoi").addClass("highlight"),$(".pull-number-2 .dau").addClass("highlight"),$(".pull-number-2 .cuoi").addClass("highlight"),$(".pull-number-2 .baolo").addClass("highlight"),!1;var c=$(".rest_today").text(),f=1*c.replace(new RegExp(",","g"),"");return d>f?(alert("Tài khoản cược không đủ, bạn còn "+c),!1):!0},run:function(a){var n=$(a).find(".txt_digital").val();if(n){var t=0;0==$(a).find(".channel input").length?t=1:$(a).find(".channel input").each(function(){this.checked&&""!=$(this).val()&&"on"!=$(this).val()&&(t+=1)}),n.match(/^\d{12}/)?this._betMega6D(a,t,n):n.match(/^\d{8}/)?this._betMega4D(a,t,n):n.match(/^\d{4}[k]\d{4}/)?this._pull4D(a,t,n):n.match(/^\d{4}( \d{4}){0,4}$/)?this._bet4D(a,t,n):n.match(/^\d{3}[k]\d{3}/)?this._pull3D(a,t,n):n.match(/^\d{3}( \d{3}){0,5}$/)?this._bet3D(a,t,n):n.match(/^\d{2}[k]\d{2}$/)?this._pull2D(a,t,n):n.match(/^\d{2}( \d{0,2}){0,8}$/)&&this._bet2D(a,t,n),BetHtml.updateTotal()}},_pull2D:function(a,n,t){var i=this.formula["2_price"],o=t.split("k"),e=Common.pullTwo(o[0]+"",o[1]+"");if(0==e)return void alert("Kéo 2 con không hợp lệ!");e=e.length;var r=parseInt($(a).find(".d2 .dau_cuoi").val()*i.DAU_CUOI.factor)||0,l=parseInt($(a).find(".d2 .dau").val()*i.DAU.factor)||0,d=parseInt($(a).find(".d2 .cuoi").val()*i.CUOI.factor)||0,c=parseInt($(a).find(".d2 .baolo").val()*i.BAOLO.factor)||0,f=parseInt($(a).find(".d2 .bao7lo").val()*i.BAO7LO.factor)||0,m=(r+l+d+c+f)*n*e,s=m*i.DAU_CUOI.commission;$(a).find(".gross").html(Common.addComma(m)),$(a).find(".net").html(Common.addComma(s.toFixed(2)))},_pull3D:function(a,n,t){var i=this.formula["3_price"],o=t.split("k"),e=Common.pullThree(o[0]+"",o[1]+"");if(0==e)return BetHtml.turnOn(a,"off"),void alert("Kéo 3 con không hợp lệ!");e=e.length;var r=parseInt($(a).find(".d3 .xc").val()*i.XC.factor)||0,l=parseInt($(a).find(".d3 .dau").val()*i.DAU.factor)||0,d=parseInt($(a).find(".d3 .cuoi").val()*i.CUOI.factor)||0,c=parseInt($(a).find(".d3 .baolo").val()*i.BAOLO.factor)||0,f=parseInt($(a).find(".d3 .bao7lo").val()*i.BAO7LO.factor)||0,m=(r+l+d+c+f)*n*e,s=m*i.XC.commission;$(a).find(".gross").html(Common.addComma(m)),$(a).find(".net").html(Common.addComma(s.toFixed(2)))},_pull4D:function(a,n,t){var i=this.formula["4_price"],o=t.split("k"),e=Common.pullFour(o[0]+"",o[1]+"");if(0==e)return BetHtml.turnOn(a,"off"),void alert("Kéo 4 con không hợp lệ!");e=e.length;var r=parseInt($(a).find(".d4 .baolo").val()*i.BAOLO.factor)||0,l=parseInt($(a).find(".d4 .cuoi").val()*i.CUOI.factor)||0,d=(r+l)*n*e,c=d*i.BAOLO.commission;$(a).find(".gross").html(Common.addComma(d)),$(a).find(".net").html(Common.addComma(c.toFixed(2)))},_bet4D:function(a,n,t){var o=this.formula["4_price"],e=$(a).find(".d4"),r=t.split(" "),l=parseInt(e.find(".baolo").val()*o.BAOLO.factor)||0,d=parseInt(e.find(".cuoi").val()*o.CUOI.factor)||0,c=0;for(i=0;i<r.length;i++){var f=r[i].slice(-4);4!=f.length&&alert("Bao 4 số không hợp lệ!"),permArr=[],usedChars=[],Common.permute(f);var m=permArr.filter(function(a,n){return permArr.indexOf(a)==n}),s=m.length;c+=l*n*(e.find(".bld").is(":checked")?s:1),c+=d*n*(e.find(".dao_cuoi").is(":checked")?s:1)}var h=c*o.BAOLO.commission;this._bet3D(a,n,t,c,h)},_bet3D:function(a,n,t,o,e){var r=this.formula["3_price"],l=$(a).find(".d3"),d=t.split(" "),c=parseInt(l.find(".xc").val()*r.XC.factor)||0,f=parseInt(l.find(".dau").val()*r.DAU.factor)||0,m=parseInt(l.find(".cuoi").val()*r.CUOI.factor)||0,s=parseInt(l.find(".baolo").val()*r.BAOLO.factor)||0,h=parseInt(l.find(".bao7lo").val()*r.BAO7LO.factor)||0,u=0;for(i=0;i<d.length;i++){var p=d[i].slice(-3);3!=p.length&&alert("Kéo 3 số không hợp lệ!"),permArr=[],usedChars=[],Common.permute(p);var v=permArr.filter(function(a,n){return permArr.indexOf(a)==n}),g=v.length;u+=c*n*(l.find(".dxc").is(":checked")?g:1),u+=f*n*(l.find(".dao_dau").is(":checked")?g:1),u+=m*n*(l.find(".dao_cuoi").is(":checked")?g:1),u+=s*n*(l.find(".bld").is(":checked")?g:1),u+=h*n*(l.find(".bld7lo").is(":checked")?g:1)}var C=u*r.BAOLO.commission;o="undefined"!=typeof o?o:0,e="undefined"!=typeof e?e:0,u+=o,C+=e,this._bet2D(a,n,t,u,C)},_bet2D:function(a,n,t,i,o){var e=this.formula["2_price"],r=$(a).find(".d2"),l=t.split(" "),d=parseInt(r.find(".dau_cuoi").val()*e.DAU_CUOI.factor)||0,c=parseInt(r.find(".dau").val()*e.DAU.factor)||0,f=parseInt(r.find(".cuoi").val()*e.CUOI.factor)||0,m=parseInt(r.find(".baolo").val()*e.BAOLO.factor)||0,s=parseInt(r.find(".bao7lo").val()*e.BAO7LO.factor)||0,h=parseInt(r.find(".da").val()*e.DA.factor)||0,u=0;if("undefined"!=typeof e.DX.factor)var u=parseInt(r.find(".dx").val()*e.DX.factor)||0;i="undefined"!=typeof i?i:0,o="undefined"!=typeof o?o:0;var p=(d+c+f+m+s)*l.length*n,v=p*e.DAU_CUOI.commission;p+=i,v+=o;var g={2:1,3:3,4:6,5:10,6:15,7:21,8:28,9:36,10:45,11:55};h>0&&l.length>=2&&("undefined"!=typeof g[l.length]?(p+=h*n*g[l.length],v+=h*n*g[l.length]*e.DA.commission):(alert("Hệ thống cần tải lại trang web"),window.location.reload())),u>0&&(2==n&&l.length>=2?"undefined"!=typeof g[l.length]?(p+=u*g[l.length],v+=u*g[l.length]*e.DX.commission):(alert("Hệ thống cần tải lại trang web!"),window.location.reload()):($(a).find(".dx").val(""),alert("Vui lòng chọn 2 ĐÀI cho ĐÁ XIÊN"))),$(a).find(".gross").html(Common.addComma(p)),$(a).find(".net").html(Common.addComma(v.toFixed(2)))},_betMega6D:function(a,n,t){var i=this.formula["4_price"],o=parseInt($(a).find(".d4 .baolo").val()*i.BAOLO.factor)||0,e=o*i.BAOLO.commission;$(a).find(".gross").html(Common.addComma(o)),$(a).find(".net").html(Common.addComma(e.toFixed(2)))},_betMega4D:function(a,n,t){var i=this.formula["4_price"],o=parseInt($(a).find(".d4 .baolo").val()*i.BAOLO.factor)||0,e=o*i.BAOLO.commission;$(a).find(".gross").html(Common.addComma(o)),$(a).find(".net").html(Common.addComma(e.toFixed(2)))}};
/*! mega */
function running_jp(){setInterval(function(){0<count_jackpot&&count_jackpot<130?$("#large-jackpot i").each(function(){if("."!=$(this).html()){var a=(parseInt($(this).data("rand"))+1)%10;$(this).html(a),$(this).data("rand",a)}}):$("#large-jackpot i").each(function(){$(this).html($(this).data("val"))}),count_jackpot++,count_jackpot%=200},70)}$(function(){$("#frm_add_bet_internal").submit(function(a){return window.onbeforeunload=null,a.preventDefault(),Common.is_processing_an_ajax?void alert("Hệ thống đang xử lý..."):""==$(".total_net").html()||"0"==$(".total_net").html()?void alert("Bạn chưa nhập đủ thông tin cược!"):(Common.is_processing_an_ajax=!0,$(".btn-warning").button("loading"),void $.ajax({url:$(this).attr("action"),type:"POST",data:$(this).serialize(),success:function(a){return a=$.parseJSON(a),Common.is_processing_an_ajax=!1,$(".btn-warning").button("reset"),a.error?void alert(a.msg):a.link?void(window.location=a.link):void alert("Cược không thành công, vui lòng thử lại")}}))}),$(".invoice-detail").on("keydown",".txt_digital_sub",function(a){var b=a.which||a.keyCode||0;if(KeyCode.isLetterE(b)||190==b||189==b)return void a.preventDefault();if(-1!==$.inArray(b,[46,8])){var c=$(this).closest("li"),d=$(this).closest("ul"),e=c.index()-1;return void(e>=0&&""==$(this).val()&&d.find("li:eq("+e+") .txt_digital_sub").focus())}if(!(-1!==$.inArray(b,[46,8,9,27,13,110])||b>=35&&b<=40)){if(!(48<=b&&b<=57||96<=b&&b<=105))return void a.preventDefault();if(4==mega_length){if($(this).val().length>=1)return void a.preventDefault()}else if($(this).val().length>=2)return void a.preventDefault()}}),$(".invoice-detail").on("keyup change",".txt_digital_sub",function(a){var b=a.which||a.keyCode||0;if(-1===$.inArray(b,[37,38,39,40])){var c=$(this).parents(".tr_wrapper"),d=$(this).closest("li"),e="";$(this).closest(".tr_wrapper").find(".txt_digital_sub").each(function(){e+=$(this).val()}),$(this).closest(".tr_wrapper").find(".txt_digital").val(e);var f=c.find(".txt_digital").val();checkDigitalMg(f)?(c.find(".d4 input").removeAttr("disabled"),is_turn_on_virtual_price_keyboard&&c.find(".d4").addClass("wrapper-virtual-price-keyboard")):(c.find(".d4 input.baolo").attr("disabled","disabled"),c.find(".d4 input.baolo").parent().removeClass("wrapper-virtual-price-keyboard"));var g=12==mega_length||10==mega_length?2:1;if($(this).val().length==g)if(d.is(":last-child"))c.find(".d4 input.baolo").focus();else{var h=$(this).closest("ul"),i=d.index()+1;h.find("li:eq("+i+") .txt_digital_sub").focus()}}}),$(".invoice-detail").on("copy paste","input.disablecopypaste",function(a){a.preventDefault()})});var count_jackpot=0;
